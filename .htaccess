# Next.js Static Files
# Allow access to _next/static files
<IfModule mod_rewrite.c>
  RewriteEngine On
  
  # Allow _next/static files
  RewriteRule ^_next/static/(.*)$ - [L]
  
  # Proxy all other requests to Node.js app
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule ^(.*)$ http://localhost:3000/$1 [P,L]
</IfModule>

# Security headers
<IfModule mod_headers.c>
  # Allow _next/static files
  <FilesMatch "_next/static/.*">
    Header set Cache-Control "public, max-age=31536000, immutable"
  </FilesMatch>
</IfModule>